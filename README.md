# 🤖 AI辩论系统 - 基于LangGraph的多Agent自博弈辩论平台

## 📖 项目简介

这是一个基于LangGraph 0.6.6构建的多Agent辩论系统，通过门面Agent和辩论Agent的协作，实现了智能化的话题讨论和自博弈辩论功能。系统能够自动识别用户意图、确认辩论话题、生成正反方观点，并进行结构化的辩论对话。

## 🎯 项目目标

### 为什么要做这个项目？

1. **探索AI思考模式**：通过构建具有"思考工具"的Agent，探索AI如何进行结构化思考和推理
2. **多Agent协作研究**：研究多个AI Agent之间的协作模式和状态管理机制
3. **辩论逻辑训练**：通过自博弈的方式，让AI学习辩论技巧和逻辑推理能力
4. **人机交互优化**：设计更自然的人机对话流程，包括意图识别、话题确认等环节

## 🏗️ 系统设计

### 核心架构

```
用户输入 → 门面Agent → 辩论准备 → 正反方Agent辩论 → 结果输出
```

### 主要组件

#### 1. 门面Agent (FacadeAgent)
- **意图识别**：识别用户是否想要进行话题讨论
- **话题确认**：与用户确认具体的讨论话题
- **观点生成**：将话题拆分为正反两方的对立观点
- **人工审核**：允许用户审核和修改生成的观点
- **辩论协调**：协调整个辩论流程

#### 2. 辩论Agent (DebateAgent)
- **辩论准备**：根据分配的立场准备论证材料
- **观点表达**：进行结构化的辩论发言
- **逻辑推理**：使用思考工具进行深度思考

#### 3. 思考工具系统
提供多种思考模式：
- `metacognition`：元认知反思
- `simple_think`：基础思考
- `critical_think`：批判性思考
- `causal_think`：因果推理
- `wait_i_think`：暂停思考
- `feeling`：情感体验
- `silence`：沉默思考
- `assume`：假设推理
- `suspect`：怀疑质疑

### 状态管理

使用LangGraph的状态图管理，包含：
- **FacadeState**：门面Agent状态（话题、观点、轮次等）
- **DebateState**：辩论Agent状态（立场、论证内容、思考过程等）
- **ThinkState**：思考状态（任务类型、思考消息等）

### 注意
一次辩论轮次为5的请求(包括识别,辩论,总结)消耗Token大概为20万,消耗时间大概在1000秒左右。
若想减少token消耗,可考虑去除总结节点。

## 🚀 安装指南

### 环境要求
- Python 3.8+
- OpenAI API Key
- LangSmith API Key（可选，用于追踪）

### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd self_project
```

2. **创建虚拟环境**
```bash
python -m venv .venv
# Windows
.venv\Scripts\activate
# Linux/Mac
source .venv/bin/activate
```

3. **安装依赖**
```bash
pip install -r requirements.txt
```

4. **配置环境变量**
```bash
cp .env.example .env
```

编辑 `.env` 文件，填入必要的配置：
```env
FACAD_MODEL_NAME=gpt-4o-mini
DEBATE_MODEL_NAME=gpt-4o-mini
OPENAI_API_KEY=your_openai_api_key
OPENAI_BASE_URL=https://api.openai.com/v1
LANGSMITH_API_KEY=your_langsmith_api_key
LANGSMITH_PROJECT=debate_system
MAX_TURN=10
```

## 📱 使用方法

### 基本使用

1. **启动系统**
```bash
python main.py
```

2. **交互流程**
   - 输入你想讨论的话题
   - 系统会识别你的意图并确认话题
   - 自动生成正反方观点
   - 人工审核观点（可选择确认、重新生成或自定义）
   - 开始自动辩论
   - 查看辩论结果

### 示例对话

```
用户：我想和你讨论，LLM是否可以仅凭借上下文做到学习？

系统：我理解你想讨论的话题是"LLM是否可以仅凭借上下文做到学习"
正方观点：LLM可以仅凭借上下文实现学习
反方观点：LLM无法仅凭借上下文实现真正的学习

[系统进行自动辩论...]
```

## 🎭 预期效果

### 系统能力
1. **智能话题识别**：准确理解用户想要讨论的话题
2. **观点自动生成**：将复杂话题拆分为对立的辩论观点
3. **结构化辩论**：进行有逻辑、有层次的辩论对话
4. **思考过程可视化**：展示AI的思考过程和推理链条
5. **彩色输出**：使用不同颜色区分正反方发言，提升可读性

### 输出示例
- 🔵 正方发言：[蓝色显示]
- 🔴 反方发言：[红色显示]  
- 🟢 系统状态：[绿色显示]
- 🟡 思考过程：[黄色显示]

## ⚠️ 当前限制

### 技术限制
1. **并发状态管理**：多Agent同时更新状态时可能出现冲突
2. **内存消耗**：长时间辩论会积累大量消息历史
3. **API依赖**：完全依赖OpenAI API，网络问题会影响使用
4. **思考工具**：当前思考工具主要用于结构化提示，实际"思考"能力有限

### 功能限制
1. **辩论深度**：缺乏专业领域知识，辩论可能流于表面
2. **逻辑一致性**：长时间辩论中可能出现逻辑不一致
3. **情感理解**：对话题的情感层面理解不足
4. **实时性**：无法获取最新信息，依赖训练数据

## 🔮 下版本计划

### v2.0 功能规划

#### 核心功能增强
1. **知识库集成**
   - 集成向量数据库，支持实时知识检索
   - 添加专业领域知识库（法律、医学、科技等）
   - 实现知识图谱推理

2. **辩论质量提升**
   - 添加辩论评判Agent，实时评估辩论质量
   - 引入论证结构分析（Toulmin模型）
   - 实现逻辑谬误检测和纠正

3. **多模态支持**
   - 支持图表、数据可视化
   - 添加语音输入输出
   - 支持文档上传和分析

#### 技术优化
1. **性能优化**
   - 重构状态管理，解决并发冲突
   - 实现流式输出，提升响应速度
   - 添加缓存机制，减少API调用

2. **可扩展性**
   - 支持自定义Agent角色
   - 插件化思考工具系统
   - 多语言支持

3. **用户体验**
   - Web界面开发
   - 辩论历史管理
   - 导出功能（PDF、Markdown等）

#### 高级功能
1. **群体辩论**：支持多人参与的辩论
2. **辩论训练**：提供辩论技巧学习模式
3. **主题推荐**：基于用户兴趣推荐辩论话题
4. **社交功能**：分享辩论记录，社区讨论

## 🤝 贡献指南

欢迎提交Issue和Pull Request！

### 开发环境设置
1. Fork项目
2. 创建功能分支
3. 提交代码
4. 创建Pull Request

### 代码规范
- 遵循PEP 8规范
- 添加必要的注释和文档
- 编写单元测试

## 📄 许可证

MIT License

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 提交GitHub Issue
- 发送邮件至：[lxz233556@gmail.com]
- 添加个人微信：[bq3381465917]

---

*让AI思考，让辩论更精彩！* 🎯
